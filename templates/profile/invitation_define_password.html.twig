{% extends "base.html.twig" %}

{% form_theme form 'bootstrap_3_layout.html.twig' %}

{% block body %}
<div class="navbar-coopcycle">
  <div class="container">
    <div class="d-flex justify-content-between">
      <h5>{{ 'registration.navigation.title'|trans }}</h5>
      {% if flow is defined and flow.stepCount > 1 %}
        <div class="step">
          {% for step in flow.steps %}
            <span class="step-number {{ step.number != flow.getCurrentStepNumber() ? 'inactive': '' }}">{{ step.number }}</span>
            <span class="{{ step.number != flow.getCurrentStepNumber() ? 'label-inactive': 'font-weight-bold' }}">{{ step.label|trans }}</span>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</div>
<div class="main">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <div class="info-section rounded">
          <h5>{{ 'registration.info.title'|trans }}</h5>
          <p>{{ 'registration.info.text'|trans }}</p>
        </div>
        <img src="{{ asset('img/registration-image.svg') }}">
      </div>
      <div class="col-md-6">
        <div class="alert alert-info">
          <i class="fa fa-info-circle"></i>
          {% trans with {
            '%brandName%': coopcycle_setting('brand_name'),
            '%invitedBy%': invitationUser.customer ? invitationUser.customer.fullname : invitationUser.username
          } %}registration.alert.text{% endtrans %}
        </div>
        {{ form_start(form) }}
          {% if flow is not defined %}
            {% include '_partials/profile/personal_information_form.html.twig' %}
          {% else %}
            {% if flow.getCurrentStepNumber() == 1 %}
              {% include '_partials/profile/personal_information_form.html.twig' with {
                form: form.user
              } %}
            {% endif %}
            {% if flow.getCurrentStepNumber() == 2 %}
              {% include '_partials/profile/business_account_company_information_form.html.twig' with {
                form: form.businessAccount
              } %}
            {% endif %}
          {% endif %}
        {{ form_end(form) }}
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block styles %}
  {{ encore_entry_link_tags('register') }}
{% endblock %}

{% block scripts %}
  {{ encore_entry_script_tags('register') }}
{% endblock %}
