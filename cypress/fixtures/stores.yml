include:
  - base.yml
  - sylius_taxation.yml

AppBundle\Entity\Base\GeoCoordinates:
  geo_1:
    __construct: [ "48.864577", "2.333338" ]
  geo_2:
    __construct: [ "48.846656", "2.369052" ]

AppBundle\Entity\Delivery\PricingRuleSet:
  pricing_rule_set_1:
    name: Default
    rules: [ '@pricing_rule_1' ]
  pricing_rule_set_impossible:
    name: Default
    rules: [ '@pricing_rule_impossible' ]

AppBundle\Entity\Delivery\PricingRule:
  pricing_rule_1:
    expression: 'distance \> 0'
    price: 499
    position: 1
    ruleSet: '@pricing_rule_set_1'
  pricing_rule_impossible:
    expression: 'distance \> 100000'
    price: 499
    position: 1
    ruleSet: '@pricing_rule_set_impossible'

AppBundle\Entity\TimeSlot:
  time_slot_1:
    name: 'Acme time slot'
    openingHours:
      - 'Mo-Su 00:00-11:59'
      - 'Mo-Su 12:00-23:59'

AppBundle\Entity\Address:
  warehouse:
    name: 'Warehouse'
    contactName: 'John Doe'
    telephone: <identity(\libphonenumber\PhoneNumberUtil::getInstance()->parse('+33112121212'))>
    addressLocality: 'Paris'
    postalCode: '75001'
    streetAddress: '272, rue Saint Honoré 75001 Paris 1er'
    geo: "@geo_1"
  client_1:
    name: 'Office'
    contactName: 'Jane smith'
    telephone: <identity(\libphonenumber\PhoneNumberUtil::getInstance()->parse('+33112121414'))>
    addressLocality: 'Paris'
    postalCode: '75009'
    streetAddress: '17, rue Milton 75009 Paris 9ème'
    geo: "@geo_3"

AppBundle\Entity\Store:
  store_1:
    name: 'Acme'
    address: "@address_1"
    enabled: true
    pricingRuleSet: '@pricing_rule_set_1'
    timeSlot: '@time_slot_1'
    __calls:
      - addAddress: [ "@warehouse" ]
      - addAddress: [ "@client_1" ]

  store_without_time_slots:
    name: 'Store without time slots'
    address: "@address_1"
    enabled: true
    pricingRuleSet: '@pricing_rule_set_1'
    __calls:
      - addAddress: [ "@warehouse" ]
      - addAddress: [ "@client_1" ]

  store_no_pricing:
    name: 'Store without pricing'
    address: "@address_1"
    enabled: true
    timeSlot: '@time_slot_1'
    __calls:
      - addAddress: [ "@warehouse" ]
      - addAddress: [ "@client_1" ]

  store_invalid_pricing:
    name: 'Store with invalid pricing'
    address: "@address_1"
    enabled: true
    pricingRuleSet: '@pricing_rule_set_impossible'
    timeSlot: '@time_slot_1'
    __calls:
      - addAddress: [ "@warehouse" ]
      - addAddress: [ "@client_1" ]

AppBundle\Entity\User:
  store1Owner:
    __factory:
      '@Nucleos\UserBundle\Util\UserManipulator::create':
        - 'store_1'
        - 'store_1'
        - 'store1@coopcycle.org'
        - true
        - false
    roles: [ 'ROLE_USER', 'ROLE_STORE' ]
    stores: [ '@store_1' ]
  store2Owner:
    __factory:
      '@Nucleos\UserBundle\Util\UserManipulator::create':
        - 'store_no_pricing'
        - 'password'
        - 'store_no_pricing@coopcycle.org'
        - true
        - false
    roles: [ 'ROLE_USER', 'ROLE_STORE' ]
    stores: [ '@store_no_pricing' ]
  store3Owner:
    __factory:
      '@Nucleos\UserBundle\Util\UserManipulator::create':
        - 'store_invalid_pricing'
        - 'password'
        - 'store_invalid_pricing@coopcycle.org'
        - true
        - false
    roles: [ 'ROLE_USER', 'ROLE_STORE' ]
    stores: [ '@store_invalid_pricing' ]
  admin:
    __factory:
      '@Nucleos\UserBundle\Util\UserManipulator::create':
        - 'admin'
        - '12345678'
        - 'admin@demo.coopcycle.org'
        - true
        - false
    roles: [ 'ROLE_ADMIN' ]

AppBundle\Entity\Sylius\Product:
  on_demand_delivery:
    code: CPCCL-ODDLVR
    currentLocale: fr
    name: Livraison à la demande
    slug: livraison-a-la-demande
    enabled: true

AppBundle\Entity\DeliveryForm:
  delivery_form:
    pricingRuleSet: '@pricing_rule_set_1'
    withVehicle: false
    withWeight: false
