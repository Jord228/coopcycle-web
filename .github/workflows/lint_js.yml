name: Lint JS
on: push
env:
  APP_ENV: test
  NODE_ENV: test
jobs:
  LINT_JS:
    name: Lint JS
    runs-on: ubuntu-latest
    env:
      CYPRESS_INSTALL_BINARY: '0'
    steps:
      - uses: actions/checkout@v2
      - name: Install JS dependencies
        run: npm ci
      - name: Run ESLint
        run: node_modules/.bin/eslint --quiet js/app/ assets/react
      - name: Run TypeScript Compiler
        id: tsc
        run: node_modules/.bin/tsc --noEmit --pretty
        continue-on-error: true
      - name: TypeScript Warning
        if: steps.tsc.outcome == 'failure'
        run: echo "::warning::TypeScript compilation failed with errors"
